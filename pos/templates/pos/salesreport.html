{% extends 'main.html' %}
{% block content %}
<style>
    #report {
        margin-left: 200px;
    }
    .report-section {
        margin-bottom: 20px;
    }
    
    .report-section h2 {
        font-size: 1.5em;
        margin-bottom: 10px;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
    }

    table, th, td {
        border: 1px solid #ddd;
    }

    th, td {
        padding: 8px;
        text-align: left;
    }

    th {
        background-color: #f2f2f2;
    }
</style>
<div class="container" id="report">
    <h2>Simple Inventory Report Template</h2>
    
    <form method="get" class="form-inline mb-4">
        <div class="form-group mr-2">
            <label for="start_date" class="sr-only">Start Date</label>
            <input type="date" class="form-control" id="start_date" name="start_date" value="{{ start_date }}">
        </div>
        <div class="form-group mr-2">
            <label for="end_date" class="sr-only">End Date</label>
            <input type="date" class="form-control" id="end_date" name="end_date" value="{{ end_date }}">
        </div>
        <button type="submit" class="btn btn-primary">Filter</button>
    </form>

    <div class="report-section">
        <h2>Total Sales</h2>
        <p>${{ total_sales }}</p>
    </div>
    <div class="report-section">
        <h2>Total Items Sold</h2>
        <p>{{ total_items_sold }}</p>
    </div>

    <div class="report-section">
        <table>
            <thead>
                <tr>
                    <th>Reorder</th>
                    <th>Item No.</th>
                    <th>Name</th>
                    <th>Manufacturer</th>
                    <th>Description</th>
                    <th>Cost per Item</th>
                    <th>Stock Quantity</th>
                    <th>Inventory Value</th>
                    <th>Reorder Level</th>
                    <th>Days per Reorder</th>
                    <th>Item Reorder Quantity</th>
                    <th>Item Discontinued?</th>
                </tr>
            </thead>
            <tbody>
                {% for item in inventory_items %}
                    <tr>
                        <td>{{ item.reorder_status }}</td>
                        <td>{{ item.item_no }}</td>
                        <td>{{ item.name }}</td>
                        <td>{{ item.manufacturer }}</td>
                        <td>{{ item.description }}</td>
                        <td>${{ item.cost_per_item }}</td>
                        <td>{{ item.stock_quantity }}</td>
                        <td>${{ item.inventory_value }}</td>
                        <td>{{ item.reorder_level }}</td>
                        <td>{{ item.days_per_reorder }}</td>
                        <td>{{ item.item_reorder_quantity }}</td>
                        <td>{{ item.item_discontinued }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <a href="{% url 'salesreportpdf' %}?start_date={{ start_date }}&end_date={{ end_date }}" class="btn btn-secondary">Download as PDF</a>
    <a href="{% url 'emailsalesreport' %}?start_date={{ start_date }}&end_date={{ end_date }}" class="btn btn-secondary">Email Report</a>
</div>
{% endblock %}